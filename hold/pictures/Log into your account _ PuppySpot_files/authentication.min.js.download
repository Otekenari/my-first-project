function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,s,i=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(i.push(o.value),i.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw n}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}ps.authentication=function(){var e=document.querySelector(".js-auth-modal-success"),t={callback:null,prepost:null,promptInformation:!1,logInForm:document.querySelector(".js-auth-modal-log-in"),signUpForm:document.querySelector(".js-auth-modal-sign-up"),saveAccountForm:document.querySelector(".js-auth-modal-save-account")},r=function(e){var t=e.target.closest(".input-wrapper").querySelector("input");"password"===t.type?(t.setAttribute("type","text"),e.target.classList.add("visible")):(t.setAttribute("type","password"),e.target.classList.remove("visible"))},o=function(e){var r=e.target;if(r){var o=r.dataset.action,s=r.querySelector(".loading");ps.loader.show([s]),o&&(e.preventDefault(),e.stopPropagation(),a(r)),window.setTimeout((function(){ps.form.hasError?ps.loader.hide([s]):o&&(t.prepost&&(o=t.prepost()),function(e,r){var o=r.querySelector(".loading"),a=ps.sendContact.formToJSON(r);Object.prototype.hasOwnProperty.call(a,"remember")||(a.remember="off"),ajax().post("/api/".concat(e),a).then((function(e){if(ps.loader.hide([o]),ps.customer={},Object.prototype.hasOwnProperty.call(e,"statusCode")&&e.statusCode>=400)return n(e,r);if(t.callback&&!r.dataset.postAction){ps.whiteModal.close();var a=t.callback(e);a&&(a.dataset.reload="reload")}return r.dataset.postAction&&-1!==["navigateAccount","showSuccess"].indexOf(r.dataset.postAction)&&t[r.dataset.postAction](r.classList.contains("js-auth-modal-sign-up"),(function(){var r=t.callback(e);r&&(r.dataset.reload="reload")})),null})).catch((function(e){ps.loader.hide([o]),n(e,r)})),ps.prefill.storeFormValues(r)}(o,r))}),0)}},n=function(e,t){var r=e;e&&e.response&&(r=e.response);try{for(var o=JSON.parse(r.message),n=0,a=Object.entries(o);n<a.length;n++){var s=_slicedToArray(a[n],2),i=s[0],c=s[1],l=t.querySelector('[name="'.concat(i,'"]'));ps.form.toggleFieldError(l,!0,c)}}catch(e){if(Object.prototype.hasOwnProperty.call(r,"message")){var u=t.querySelector(".js-error-container span");u&&(u.textContent=r.message)}}},a=function(e){var t=e.querySelector(".js-error-container span");t&&(t.textContent="")},s=function(){t.logInForm.classList.contains("hidden")?i(t.logInForm):i(t.signUpForm)},i=function(e){var t=e.querySelector("input");ps.animate.hideAll(".authentication__modal .js-form-validate"),ps.animate.show(e),t&&t.focus()};return t.navigateAccount=function(){window.location.href="/my-account"},t.navigateHome=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&ps.whiteModal.close(e),window.location.href="/"},t.showSuccess=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.querySelector(".js-white-modal.white-modal--success");if(n&&n.classList.contains("hidden")&&ps.whiteModal.show(n),t.signUpForm&&ps.animate.hide(t.signUpForm),t.logInForm&&ps.animate.hide(t.logInForm),ps.animate.show(e),ps.animate.show(e.querySelector(".js-success-message")),r){var a=document.querySelector(".js-white-modal.authentication"),s=ps.utils.removeListeners(document.querySelector(".js-continue")),i=ps.utils.removeListeners(document.querySelector(".js-close-modal"));a.classList.add("white-modal--success"),s.addEventListener("click",(function(){ps.whiteModal.close(n),o&&o()})),i.addEventListener("click",(function(){ps.whiteModal.close(n),o&&o()}))}else{var c=ps.utils.removeListeners(document.querySelector(".js-continue")),l=ps.utils.removeListeners(document.querySelector(".js-close-modal"));l.addEventListener("click",(function(){t.navigateHome(n)})),c.addEventListener("click",(function(){t.navigateHome(n)}))}},t.modal=function(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=document.querySelector(".js-white-modal.authentication"),l=c.querySelectorAll(".authentication__social a"),u="".concat(window.location.pathname).concat(window.location.search),d=_createForOfIteratorHelper(l);try{for(d.s();!(r=d.n()).done;){var m=r.value,p=new URL(m.href);s?p.searchParams.set("favorite_puppy_id",s):p.searchParams.delete("favorite_puppy_id"),p.searchParams.set("redirect_url",u),m.href=p.toString()}}catch(e){d.e(e)}finally{d.f()}if(c)if(ps.whiteModal.show(c,n&&e),t.prepost=a,t.callback=e,i(o||t.logInForm),ps.customer){i(t.saveAccountForm);var f=t.saveAccountForm.querySelector(".success-message__message");f.innerHTML="Thank you.<br> Your form has been submitted.",ps.animate.hide(".js-save-account__content"),ps.animate.show(".js-auth-modal-save-account .js-success-message"),ps.animate.hide(".js-auth-modal-save-account .js-success-message .success-message__description")}else i(o||t.logInForm)},t.completeInformationModal=function(){var e=document.querySelector(".js-white-modal.complete-information");e&&(ps.whiteModal.show(),t.callback=function(){ps.whiteModal.close(e),t.showSuccess()})},t.init=function(){var e,n,a,i=document.querySelectorAll(".js-show-password");Array.from(i).forEach((function(e){e.addEventListener("click",r)})),ps.loader.hide(),e=document.querySelectorAll(".js-password-input"),n=document.querySelectorAll(".authentication .js-form-validate"),a=document.querySelectorAll(".js-form-change"),Array.from(a).forEach((function(e){e.addEventListener("click",s)})),Array.from(n).forEach((function(e){e.addEventListener("submit",o)})),Array.from(e).forEach((function(e){var t=e.querySelector("input"),r=e.querySelector(".js-password-help");t.addEventListener("focus",(function(){ps.animate.show(r)})),t.addEventListener("blur",(function(){ps.animate.hide(r)}))})),t.promptInformation&&t.completeInformationModal()},t}(),ps.authentication.init();
